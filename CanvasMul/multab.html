<!DOCTYPE html>
<html>
<head>
    <title>Lista 4</title>
    <style>

        th.header {
            background-color: whitesmoke;
            text-align: center;
        }

        td.even {
            background-color: green;
            text-align: center;
        }

        td.odd {
            background-color: blue;
            text-align: center;
        }
    </style>
</head>
<body>

    <p> <a href="canva.html">Canva</a> </p>
    
    <form>
        <label for="number">Podaj n (5<=n<=20):</label>
        <input type="number" id="number" name="number" value="value"><br>
    </form>

    <button type="button" id="button">GO</button>

    <script>
        document.getElementById("button").addEventListener("click", function () {
            var passedNumber = parseInt(document.getElementById("number").value);

            if (passedNumber < 5 || passedNumber > 20) {
                var param = document.createElement("p");
                param.innerText = "Podana wartość jest nieprawidłowa, dlatego przyjęto n=10";
                document.body.appendChild(param);
                passedNumber = 10;
            }
            const numbers = [];
            createNumberList();
            createTable();
            function createNumberList() {
                for (var i = 0; i < passedNumber; i++) {
                    numbers.push(Math.floor(Math.random() * 99) + 1);
                }
            }

            function createTable() {
                var table = document.createElement("table");
                document.body.appendChild(table);

                var thead = document.createElement("thead");
                table.appendChild(thead);

                var tbody = document.createElement("tbody");
                table.appendChild(tbody);

                var headerRow = document.createElement("tr");
                thead.appendChild(headerRow);

                var rowHeader = document.createElement("th");
                rowHeader.textContent = "";
                rowHeader.classList.add("header");
                headerRow.appendChild(rowHeader);

                for (var i = 0; i < passedNumber; i++) {
                    var columnHeader = document.createElement("th");
                    columnHeader.textContent = numbers[i];
                    columnHeader.classList.add("header");
                    headerRow.appendChild(columnHeader);
                }

                for (var i = 0; i < passedNumber; i++) {
                    var row = document.createElement("tr");
                    tbody.appendChild(row);

                    var rowHeader = document.createElement("th");
                    rowHeader.textContent = numbers[i];
                    rowHeader.classList.add("header");
                    row.appendChild(rowHeader);

                    for (var j = 0; j < passedNumber; j++) {
                        var result = numbers[i] * numbers[j];
                        var cell = document.createElement("td");
                        cell.textContent = result;
                        if (result % 2 === 0) {
                            cell.classList.add("even");
                        } else {
                            cell.classList.add("odd");
                        }
                        row.appendChild(cell);

                        (function(result) {
                            cell.addEventListener("click", function() {
                                alert(result);
                            });
                        })(result);
                    }
                }
            }
        });
    </script>


</body>
</html>
